if(!window.modalInitialized){let t=document.getElementById("modalHero"),o=document.getElementsByClassName("close")[0],n=document.getElementsByClassName("modal__close modal__close--hero")[0];function e(){t.style.display="none",localStorage.setItem("modalHeroState","closed")}"closed"!==localStorage.getItem("modalHeroState")&&(window.onload=function(){setTimeout(function(){t.style.display="block"},15e3)}),o&&(o.onclick=e),n&&(n.onclick=e);let l=null,s=null;window.addEventListener("firebaseDataLoaded",e=>{l=e.detail.botToken,s=e.detail.chatId,console.log("botToken in modalFirst.js:",l),console.log("chatId in modalFirst.js:",s)});let a=(e,t,o,n)=>{if(!l||!s){console.error("botToken or chatId is not set");return}let a=`Name: ${e}
Phone: ${t}
Business: ${o}
Competitors: ${n}`;if(!a.trim()){console.error("Message text is empty"),alert("Message text is empty");return}let d=`https://api.telegram.org/bot${l}/sendMessage`,r={chat_id:s,text:a};console.log("Sending request to:",d),console.log("Request data:",r),fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(e=>e.json()).then(e=>{e.ok?alert("Message sent successfully!"):alert("Failed to send message. Error: "+e.description)}).catch(e=>{console.error("Error:",e),alert("Error sending message")})};document.querySelector(".modal__form--hero").addEventListener("submit",function(t){t.preventDefault();let o=document.getElementById("name").value||"не заполнено";a(o,document.getElementById("phone").value||"не заполнено",document.getElementById("business").value||"не заполнено",document.getElementById("competitors").value||"не заполнено"),e(),this.reset()}),window.modalInitialized=!0}
//# sourceMappingURL=index.e013b62c.js.map
